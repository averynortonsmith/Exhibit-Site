<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>SIMILE Widgets | Exhibit</title>

		<link rel="stylesheet" type="text/css" href="grid12.css">
		<link rel="stylesheet" type="text/css" href="inc/css/index.css">
		<link rel="stylesheet" type="text/css" href="inc/css/tutorial.css">
		<link rel="shortcut icon" href="files/fav.ico" />

		<link href="files/json/egypt.js" type="application/json" rel="exhibit/data" />
		<script src="http://api.simile-widgets.org/exhibit/3.1.0rc/exhibit-api.js"></script>
		<link rel="exhibit-extension" href="http://api.simile-widgets.org/exhibit/HEAD/extensions/time/time-extension.js"/>
		<link rel="exhibit-extension" type="text/javascript" href="http://localhost/exhibit-all/exhibit/scripted/demos/api/extensions/map/map-extension.js" data-ex-apikey="AIzaSyCDO3EXWKJms5T38db48czFJZDunhYIzn8"/>
	</head>

	<body>
		<header class="container">
			<div class="row">
				<div class="col-xs-12 col-sm-12">
					<h2><a href="./">Exhibit</a></h2> <div id="description">Publishing Framework for Data-Rich Interactive Web Pages</div>
				</div>
			</div>
			<div class="row">
				<div class="col-xs-12 hidden-xs">
					<nav>
						<a href="./">Home</a>
						<a href="./examples.html">Examples</a>
						<a href="./tutorial.html" class="active">Tutorial</a>
						<a href="./">Docs</a>
						<a href="./development.html">Developement</a>
					</nav>
				</div>
				<div class="col-xs-12 visible-xs">
					<nav id="smallNav">
						<a href="./">Home</a>
						<a href="./examples.html">Examples</a>
						<a href="./tutorial.html" class="active">Tutorial</a>
						<a href="./">Docs</a>
						<a href="./development.html">Developement</a>
					</nav>
				</div>
			</div>
		</header>

		<div class="container" id="main">
			<div class="row">
				<div class="col-xs-12" id="infoContainer">
					<div id="information">
						<div class="row">
							
							<h1>CAR Hand-on: Simile Exhibit Framework</h1>
							<h2>
								1: What is Exhibit?
							</h2>

							<div class="narrative">
								Welcome!  This is a hands-on tutorial from CAR 2012 on
								producing <a href="http://people.csail.mit.edu/karger/Exhibit/CAR/HandsOn/egypt.html">this exhibit</a>.  This document will
								walk you through all the steps needed to create it.  Alternatively,
								you can download <a href="http://people.csail.mit.edu/karger/Exhibit/CAR/HandsOn/hands-on.zip">this zip file</a> which
								contains all the relevant documents and work through them locally
								(warning: the chrome browser won't let this demo open local files, so
								if you want to do this you'll need to use firefox or safari or put
								these files on a web server somewhere).

								<div data-ex-role="collection" data-ex-item-types="Item"></div>

								<h3>1.1: New Visualization Tags for your HTML</h3>

								The idea behind <a href="http://simile-widgets.org/exhibit">Exhibit</a> is that putting a map or a sortable list or a timeline into your web page shouldn't be a hard programming problem, but rather a simple part of authoring your article.  Exhibit lets you incorporate tabular data---spreadsheets---into your web pages.  Then it defines a bunch of new tags---like &lt;map&gt;, &lt;timeline&gt;, and &lt;facet&gt;---that you can drop into your html documents.  You attach them to the data the same way you make charts in excel: by specifying the data columns that contain the coordinates, dates, or attributes for the visualizations.  Anyone visiting the page will see and interact with all the rich visuals you specified with the tags.
								<h3>1.2: No Installation</h3>
								There is no software to install.  Exhibit is implemented as an open source javascript library you just include in your web page.  Because it works entirely on the client browser, it can be integrated into whatever CMS you are using.

								<h3>1.3: Think Small</h3>
								Exhibit is designed for small data sets.  It's perfect for showing a few thousand items.  If you have ten thousand, it will load a bit slowly but will be very responsive after.  If you have 50,000 it will still work fine but interaction will start to slow down.  Some exhibits have been created with as many as 250,000 items.

								<h3>1.4: What you need to know for this walkthrough</h3>
								Exhibit is a bunch of new html tags---tags that WYSIWYG html editors don't know.  The most direct way to edit an exhibit is to edit the HTML source directly (or copy someone else's).  That's what we'll focus on in this hands-on.  We have projects under way to make authoring easier: our <a href="http://projects.csail.mit.edu/datapress">Datapress</a> project provides a wordpress extension that lets you WYSIWYG edit your exhibit into a blog post, and <a href="http://projects.csail.mit.edu/exhibit/Dido">Dido</a> is a (still experimental) standalong WYSIWYG editor for exhibits.

								<h2>2: Walkthrough</h2>

								In this walkthrough, we're going to
								create <a href="http://people.csail.mit.edu/karger/Exhibit/CAR/HandsOn/egypt.html" target="result">this visualization</a> of a bunch of
								tweets curated by Andy Carvin during the Tahrir Square riots.  We
								originally produced this Exhibit, together with Sisi Wei of the
								Washington Post, at an ONA Hackathon in Boston.
							</div>
							<div id="mainText">
								<h3>2.1: Add the Script</h3>
								<div class="narrative">
									To begin using exhibit, you need to put a link to the Exhibit library in the head of your html document:
									<p>
										<code>
											&lt;script src="http://api.simile-widgets.org/exhibit/STABLE/exhibit-api.js" &gt;&lt;/script&gt;
										</code>
									</p>
									<p>
										Right now, it won't do anything.
									</p>
								</div>
								<h3>2.2: Plan Your Data</h3>
								<div class="narrative">
									To make an Exhibit you need some data.  Tabular 	    (spreadsheet) data is a good starting point.  We generally think of 	    each data row as describing an <b>Item</b>.   Each column describes a 	    different named <b>property</b> of the item.  You'll want a header row 	    in your table, giving the names of these properties.  The entries in 	    the cells provide <b>values</b> for the various properties of the 	    item.  These values can be numbers, strings, dates, etc.  
									<p>
									  Exhibit imposes few restrictions on your data.  It does 	      require that each item have a <b>label</b> to identify it. Make sure 	      that one of your columns headings is "label" and you'll be fine.  	      Exhibit <b>distinguishes</b> items by their label, so if you give two 	      items the same label, Exhibit will think you are talking about the 	      same item twice and <b>merge</b> their properties.  So make sure 	      labels are distinct!
									</p><p>
									  For this demonstration we're going to work with a 	      collection of Tweets curated by Andy Carvin during the Tahrir Square 	      Arab-Spring riots in Egypt.  You can see this collection the 	      <a href="https://docs.google.com/spreadsheet/pub?key=0AhAtARHyRN5adFBTczRpMktmS3BPU0lpRVBWenhCV3c&amp;output=html">Google 		Spreadsheet</a> to the right.  Notice that we have one row per tweet, 	      and column heading naming the particular properties like date, label, 	      url, and username.  Looking further to the right, notice that in 	      "keywords" column there are multiple values separated by semicolons.  	      Exhibit knows to break those up (and allows items to have multiple 	      values for a property).
								</p></div>
								<div class="example">
									<iframe src="https://docs.google.com/spreadsheet/pub?key=0AhAtARHyRN5adFBTczRpMktmS3BPU0lpRVBWenhCV3c&amp;output=html" style="overflow:auto" height="400px" width="100%"></iframe>

								</div>
								<h3>2.3: Link to Your Data</h3>
								<div class="narrative">
									Exhibit can read a variety of tabular data formats, including TSV and CSV.  Exhibit's "native" format is JSON, a standard representation of data on the web.  It can read some XML formats.  Using <a href="http://service.simile-widgets.org/babel">Babel</a>, you can translate certain other formats, such as excel spreadsheets, into Exhibit json.   Exhibit can also directly read from Google Spreadsheets (giving you the ability to dynamically udpdate the data in your presentation).  In general, web security features require that your data file be on the <b>same web site</b> as your Exhibit html document.  Google Spreadsheets uses a special technique called <b>JSONP</b> to get around this restriction.  Your data providers can use it too but it requires learning.
									<p>
										For this hands-on, we've provided a <a href="http://people.csail.mit.edu/karger/Exhibit/CAR/HandsOn/egypt.txt">TSV file</a> and a <a href="http://people.csail.mit.edu/karger/Exhibit/CAR/HandsOn/egypt.js">JSON file</a> that you can see to the right.  Either one will do to provide the data.
									</p><p>
										To tell Exhibit about your data, you put a link to it in the head of your document.  To link to the tsv file, we write
									</p><p>
									<code>
										<!-- HTML generated using hilite.me --><div style="background: #272822; overflow:auto;width:auto;padding: 10px; border-radius: 4px;"><pre style="margin: 0; line-height: 125%"><span style="color: #f92672">&lt;link</span> <span style="color: #a6e22e">rel=</span><span style="color: #e6db74">&quot;exhibit/data&quot;</span> <span style="color: #a6e22e">type=</span><span style="color: #e6db74">&quot;text/tsv&quot;</span> <span style="color: #a6e22e">data-ex-value-separator=</span><span style="color: #e6db74">&quot;;&quot;</span> <span style="color: #a6e22e">href=</span><span style="color: #e6db74">&quot;egypt.txt&quot;</span><span style="color: #f92672">/&gt;</span></pre></div>
									</code>
									</p><p>
										(The <code>data-ex-value-separator</code> tells Exhibit that fields
										containing semicolons should be split into multiple values.  You can
										leave it out if you don't need to split fields.)  If you want to link
										to the json instead you can write (no type specification here because json is the default for exhibit):
									</p><p>
									<code>
										<!-- HTML generated using hilite.me --><div style="background: #272822; overflow:auto;width:auto;padding: 10px; border-radius: 4px;"><pre style="margin: 0; line-height: 125%"><span style="color: #f92672">&lt;link</span> <span style="color: #a6e22e">rel=</span><span style="color: #e6db74">&quot;exhibit/data&quot;</span> <span style="color: #a6e22e">href=</span><span style="color: #e6db74">&quot;egypt.js&quot;</span><span style="color: #f92672">/&gt;</span></pre></div>
									</code>

									</p><p>
										Either will do.  Note that you need to specify the format of the file as a "type" argument.  If you want to link directly to a Google Spreadsheet, see the discussion at the end of this tutorial. 
									</p><p>
										Exhibit has only limited ability to handle errors in the input data files.  For example, a stray quotation mark in our tweets TSV file will lead Exhibit to treat the data following it as a quoted string---likely not what you want.  And Exhibit is not particularly good about reporting error messages.  The best support is provided with the JSON format, where we provide a <a href="http://service.simile-widgets.org/babel/validator">validation service</a> that tells you if you have any syntax errors in your data file.

									</p>
								</div>

								<div class="example">
									<h3>TSV file</h3>
									<iframe src="http://people.csail.mit.edu/karger/Exhibit/CAR/HandsOn/egypt.txt" style="overflow:auto" height="250px" width="100%"></iframe>
									<h3>JSON file</h3>
									<iframe src="http://people.csail.mit.edu/karger/Exhibit/CAR/HandsOn/egypt.js" style="overflow:auto" height="250px" width="100%"></iframe>
								</div>

								<h3>2.4: Views</h3>

								<div class="narrative">
									We've linked to the data, but we haven't yet told Exhibit how and where in the page we want to <b>see</b> it.  Exhibit expects us to specify some <b>views</b> of the data.  Exhibit offers many types of views---lists, thumbnail galleries, maps, timelines, and charts. We'll begin with the default, the "list of items" view.  To produce this, we place a "view" tag in the html wherever we want that view to appear:
									<p>
										<code>
											<!-- HTML generated using hilite.me --><div style="background: #272822; overflow:auto;width:auto;padding: 10px; border-radius: 4px;"><pre style="margin: 0; line-height: 125%"><span style="color: #f92672">&lt;div</span> <span style="color: #a6e22e">data-ex-role=</span><span style="color: #e6db74">&quot;view&quot;</span><span style="color: #f92672">&gt;&lt;/div&gt;</span></pre></div>

										</code>
									</p><p>
										You can look at the resulting Exhibit <a href="egypt0.html" target="result">here</a>.  It isn't very exciting yet because we haven't specialized the view.  But it does already present the data, and includes, at the top, the ability to <b>sort</b> the data by various properties.  
									</p>
								</div>
								<div class="example">
									<div class="exhibit">
										<div data-ex-role="view">
											
										</div> 
									</div>
								</div>
								<h3>2.5: Lenses</h3>
								<div class="narrative">
									The first improvement we'll make is in the way individual items show in the list.  Right now, Exhibit is showing a default view of each item, listing all the properties and their values.  We can specialize this view using a <b>Lens</b>.  Lenses are templates---pictures of how we want items to look.  We specify the HTML that should present a single item, along with "fill in the blanks" instructions that say where to inject the values of specific properties of the displayed item.  Here's a simple lens for the tweet data:
									<p>
										<code>
<!-- HTML generated using hilite.me --><div style="background: #272822; overflow:auto;width:auto;padding: 10px; border-radius: 4px; color: #ccc;"><pre style="margin: 0; line-height: 125%"><span style="color: #f92672">&lt;div</span> <span style="color: #a6e22e">data-ex-role=</span><span style="color: #e6db74">&quot;lens&quot;</span><span style="color: #f92672">&gt;</span> 
  <span style="color: #f92672">&lt;span</span> <span style="color: #a6e22e">data-ex-content=</span><span style="color: #e6db74">&quot;.hour&quot;</span><span style="color: #f92672">&gt;&lt;/span&gt;</span>: <span style="color: #f92672">&lt;span</span> <span style="color: #a6e22e">data-ex-content=</span><span style="color: #e6db74">&quot;.label&quot;</span><span style="color: #f92672">&gt;&lt;/span&gt;</span> 
<span style="color: #f92672">&lt;/div&gt;</span></pre></div>
										</code>

									<p>
										This lens just shows the hour property, followed by a colon and the label, which for this data set is just the tweet itself.
									</p>
									<p>
										We give Exhibit a lens template by writing a &lt;div&gt; data-ex-role="lens" &lt;/div&gt; tag.  Inside this tag we write the HTML of the way we would like a single item to look.  When we want to fill in a blank with a particular property like the label, we write &lt;span data-ex-content=".label"&gt;&lt;/span&gt;.  Remember to put the period before the property name.
									</p>  
									<p>
										If you put your lens at the top level of your html document, it will be used by all the views in the document.  If you put the lens <b>inside</b> the tag defining a particular view, then the lens will <b>only</b> be used in that view.  This allows you to include different lenses in different views.
									</p>
									<p>
										Adding this lens makes the tweets look much nicer, as you can see <a href="egypt1.html" target="result">here</a>.
									</p>

								</div>
								<div class="example">
									<div class="exhibit">
										<div data-ex-role="view">
											<div data-ex-role="lens">
												<span data-ex-content=".hour"></span>: <span data-ex-content=".label"></span>
											</div>
										</div>
									</div>
									</div>
	
									<h3>2.6: Sorting the List View</h3>

									<div class="narrative">
										Note that the list view has ordered the items alphabetically
										by label, i.e. tweet.  This is the default, and isn't so sensible in this case.  We can change the order by adding an <code>data-ex-orders</code> attribute to the view.  While we're at it, we can also specify which properties of the data are useful for sorting using <code>data-ex-possible-orders</code>:
										<p>	
											<code>
<!-- HTML generated using hilite.me --><div style="background: #272822; overflow:auto;width:auto;padding: 10px; border-radius: 4px; color: #ccc;"><pre style="margin: 0; line-height: 125%"><span style="color: #f92672">&lt;div</span> 
  <span style="color: #a6e22e">data-ex-role=</span><span style="color: #e6db74">&quot;view&quot;</span> 
  <span style="color: #a6e22e">data-ex-label=</span><span style="color: #e6db74">&quot;List&quot;</span> 
  <span style="color: #a6e22e">data-ex-orders=</span><span style="color: #e6db74">&quot;.username,.hour&quot;</span> 
  <span style="color: #a6e22e">data-ex-possible</span> <span style="color: #a6e22e">orders=</span><span style="color: #e6db74">&quot;.action,.date,.emotion, .gender,.hour,.location,.role,.username&quot;</span><span style="color: #f92672">&gt;</span>
<span style="color: #f92672">&lt;/div&gt;</span></pre></div>
											</code>
										</p>

										<p>
											If you load the <a href="egypt2.html" target="result">resulting exhibit</a>, you'll see that tweets are now sorted (and grouped) by user, then sub-sorted by hour.  You can list several properties, separated by commas, to sort by the first property, then break ties using the second property, and so forth.  Exhibit also lets you specify whether to group together items with the same value of the sort property under a common header---ties are grouped by default by you can override by adding the <code>data-ex-grouped="false"</code> attribute to the view.
										</p>
										<p>
											Users can change the sort order and grouping by clicking on the header of the list view, but you can give them a natural starting order.
										</p>
									</div>
									<div class="example">
									  <div class="exhibit">
										<div data-ex-role="view" data-ex-orders=".username,.hour" 	 data-ex-possible-orders=".action,.date,.emotion,.gender,.hour,.location,.role,.username">
											<div data-ex-role="lens">
												<span data-ex-content=".hour"></span>: <span data-ex-content=".label"></span>
											</div>
										</div>
									</div>

									<h3>2.7: Tabular View</h3>

									<div class="narrative">
									 	We can add other views, again using the view tag but now specifying the view type using the <code>viewClass</code> attribute.  Like different kinds of charts in Excel, different types of views need different configuration options.  These options are specified as attributes of the view tag.  Let's start with a tabular view.  This is basically a normal table, although Exhibit does give the user the ability to sort the table by clicking on the columns headings.
										<p>
											<code>
<!-- HTML generated using hilite.me --><div style="background: #272822; overflow:auto;width:auto;padding: 10px; border-radius: 4px; color: #ccc;"><pre style="margin: 0; line-height: 125%"><span style="color: #f92672">&lt;div</span> 
  <span style="color: #a6e22e">data-ex-role=</span><span style="color: #e6db74">&quot;view&quot;</span> 
  <span style="color: #a6e22e">data-ex-view-class=</span><span style="color: #e6db74">&quot;Tabular&quot;</span> 
  <span style="color: #a6e22e">data-ex-columns=</span><span style="color: #e6db74">&quot;.username,.role,.location,.label&quot;</span> 
  <span style="color: #a6e22e">data-ex-column-labels=</span><span style="color: #e6db74">&quot;Who,Role,Where?,Tweet&quot;</span><span style="color: #f92672">&gt;&lt;/div&gt;</span> 
</pre></div>
											</code>
										</p>
										<p>
											For the tabular view, the key is specifying which columns to display using a comma separated list of property names in <code>data-ex-columns</code>.  Another option <code>data-ex-columnLabels</code>, lets you specify what goes in the column headings.  There are many other options to let you style the different columns.
										</p>
									</div>
									<div class="example">
										<div class="exhibit">
											<div data-ex-role="view" data-ex-label="Table" data-ex-view-class="Tabular" data-ex-columns=".username,.role,.location,.label" data-ex-column-labels="Who,Role,Where?,Tweet"></div>
									  	</div>
									</div>

									<h3>2.8: Timeline</h3>

									<div class="narrative">
								  		Now let's place our items on a timeline.  To do that we need to specify which properties define the start (and optionally end) points of the  timeline position of the item.  We do so by placing the attributes <code>data-ex-start</code> and (optionally) <code>data-ex-end</code> in the view description.  We can also <code>color code</code> the marks on the timeline to reflect some categorization, by setting the <code>data-ex-colorKey</code> option.  Each of these options expects the specification of a (period-prefixed) property name that should be used.  We can also configure other natural quantities like the the time-unit of the timeline tickmarks (minute, day, week, hour, year etc.) on both the top and bottom bands of the timeline, as well as the spacing of those tickmarks.  
										<p>
											<code>
<!-- HTML generated using hilite.me --><div style="background: #272822; overflow:auto;width:auto;padding: 10px; border-radius: 4px; color: #ccc;"><pre style="margin: 0; line-height: 125%"><span style="color: #f92672">&lt;div</span> 
  <span style="color: #a6e22e">data-ex-role=</span><span style="color: #e6db74">&quot;view&quot;</span> 
  <span style="color: #a6e22e">data-ex-view-class=</span><span style="color: #e6db74">&quot;Timeline&quot;</span> 
  <span style="color: #a6e22e">data-ex-start=</span><span style="color: #e6db74">&quot;.time&quot;</span> <span style="color: #a6e22e">data-ex-color-key=</span><span style="color: #e6db74">&quot;.username&quot;</span> 
  <span style="color: #a6e22e">data-ex-top-band-unit=</span><span style="color: #e6db74">&quot;minute&quot;</span> 
  <span style="color: #a6e22e">data-ex-top-band-pixels-per-unit=</span><span style="color: #e6db74">&quot;140&quot;</span> 
  <span style="color: #a6e22e">data-ex-bottom-band-pixels-per-unit=</span><span style="color: #e6db74">&quot;500&quot;</span><span style="color: #f92672">&gt;</span>
<span style="color: #f92672">&lt;/div&gt;</span></pre></div>
											</code>
									 	<p>
											The timeline view is an <b>extension</b> in exhibit; it isn't automatically available.  You need to include another script in the head of your document, after the main exhibit script, to provide the new view:
										</p>
									  	<p>
											<code>
										  		&lt;script src=&quot;http://trunk.simile-widgets.org/exhibit/api/extensions/time/time-extension.js&quot;&gt;&lt;/script&gt;
										</code>
									 	<p>
											The timeline view is shown to the right.  If you click on a particular item, you'll get a pop-up bubble with more detail.  The bubble contents are determined by the lens associated with this view.

											If we add this timeline to our previous Exhibit, we get <a href="http://people.csail.mit.edu/karger/Exhibit/CAR/HandsOn/egypt3.html">this one</a>
										</p>
									</div>
									<div class="example">
										<div data-ex-role="view" data-ex-view-class="Timeline" data-ex-start=".time" data-ex-color-key=".username" data-ex-top-band-unit="minute" data-ex-top-band-pixels-per-unit="140" data-ex-bottom-band-pixels-per-unit="500">
											<div data-ex-role="lens">
										  		<span data-ex-content=".hour"></span>: <span data-ex-content=".label"></span>
											</div>
									  	</div>
									</div>

									<h3>2.9: View Panels</h3>

									<div class="narrative">
									 	With three views, the presentation is getting a little long.  We can pack things together using a <b>View Panel</b>.  The View Panel gathers several views together, give each one a title, and lets the user flip between them so that only one is occupying page space at a time.  As usual, you define the view panel with an html tag:
										<p>
											<code>
<!-- HTML generated using hilite.me --><div style="background: #272822; overflow:auto;width:auto;padding: 10px; border-radius: 4px; color: #ccc;"><pre style="margin: 0; line-height: 125%"><span style="color: #f92672">&lt;script </span><span style="color: #a6e22e">src=</span><span style="color: #e6db74">&quot;http://trunk.simile-widgets.org/exhibit/api/extensions/time/time-extension.js&quot;</span><span style="color: #f92672">&gt;&lt;/script&gt;</span></pre></div>											
											</code>
										</p>
										<p>
											Take any views you want managed by the view panel, and put their tags inside the viewPanel tag.   That's it!  You get the view panel shown to the right.  You select views at the top.    You can see the overall result in <a href="egypt4.html" target="result">this exhibit</a>. 
										</p> 
										<p>
											You can mix any number of view panels with any number of standalone views on the page.  One popular approach is to present one "primary" view and then below it a view panel for switching among secondary views.  Note that in the view-switching header each view is named by its type.  If you have several views of the same type, or just want more informative names, you can add an <code>data-ex-label</code> attribute to each view that will override its name.
										</p>
									</div>
									<div class="example">
										<div class="exhibit">
											<div data-ex-role="viewPanel">
											<div data-ex-role="lens">
												<span data-ex-content=".hour"></span>: <span data-ex-content=".label"></span>
											</div>
											<div data-ex-role="view" data-ex-view-class="Timeline" 	 data-ex-start=".time" data-ex-color-key=".username"  data-ex-time-line-height="350" data-ex-top-band-pixels-per-unit="150" 	 data-ex-bottom-band-pixels-per-unit="400"></div>
											<div data-ex-role="view" data-ex-label="List" 	 data-ex-orders=".hour" 	 data-ex-possible-orders=".action,.data,.emotion,.gender,.hour,.location,.role,.username">
										 	 </div>
										  	<div data-ex-role="view" data-ex-label="Table" data-ex-view-class="Tabular" data-ex-columns=".username,.role,.location,.label" data-ex-column-labels="Who,Role,Where?,Tweet"></div>
										</div>
									</div>

									<h3>2.10: Filtering with Facets</h3>

									<div  class="narrative">
										Exhibit includes <b>facets</b> that can filter the data being displayed.  To specify a facet you specify the expression (e.g. property) that should be used to filter, and optionally a facet type.  The default facet, the list facet, simply lists all values of the property; clicking on a value filters down to the items that have the chosen value on that property:
									  	<p>
											<code>
<!-- HTML generated using hilite.me --><div style="background: #272822; overflow:auto;width:auto;padding: 10px; border-radius: 4px; color: #ccc;"><pre style="margin: 0; line-height: 125%"><span style="color: #f92672">&lt;div</span> <span style="color: #a6e22e">data-ex-role=</span><span style="color: #e6db74">&quot;view-panel&quot;</span><span style="color: #f92672">&gt;&lt;/div&gt;</span></pre></div>
											</code>
										</p>
										<p>
											As usual, there are additional options.  Besides the obvious "height" of the facet, <code>data-ex-show-missing</code> specifies what to do about items that <i>don't have</i> a value for the property. When set to false, those items simply don't participate in the facet.  When set to true, the facet will include a selectable "missing this value" option.
										</p>
										<p>
											Besides the default list facet, there as a textsearch facet that offers a textbox where the reader can type arbitrary text that is matched against the content of the items.
										</p>
									  	<p>
											<code>
<!-- HTML generated using hilite.me --><div style="background: #272822; overflow:auto;width:auto;padding: 10px; border-radius: 4px; color: #ccc;"><pre style="margin: 0; line-height: 125%"><span style="color: #f92672">&lt;div</span> <span style="color: #a6e22e">data-ex-role=</span><span style="color: #e6db74">&quot;facet&quot;</span> <span style="color: #a6e22e">data-ex-facet-class=</span><span style="color: #e6db74">&quot;TextSearch&quot;</span><span style="color: #f92672">&gt;&lt;/div&gt;</span></pre></div>
											</code><br/>
											There is also a TagCloud facet type that displays values in a tag cloud (larger ones are more common):
										</p>
									  	<p>
											<code>
<!-- HTML generated using hilite.me --><div style="background: #272822; overflow:auto;width:auto;padding: 10px; border-radius: 4px; color: #ccc;"><pre style="margin: 0; line-height: 125%"><span style="color: #f92672">&lt;div</span> 
  <span style="color: #a6e22e">data-ex-role=</span><span style="color: #e6db74">&quot;facet&quot;</span> 
  <span style="color: #a6e22e">data-ex-expression=</span><span style="color: #e6db74">&quot;.keywords&quot;</span> 
  <span style="color: #a6e22e">data-ex-facet-class=</span><span style="color: #e6db74">&quot;Cloud&quot;</span> 
  <span style="color: #a6e22e">data-ex-show-missing=</span><span style="color: #e6db74">&quot;false&quot;</span><span style="color: #f92672">&gt;</span>
<span style="color: #f92672">&lt;/div&gt;</span></pre></div>
											</code>
										</p>
									  	<p>
											For number-valued properties, there is a NumericRange facet (lists of ranges of numbers) and Slider facet (slide to select upper and lower limits for the number value).  We don't have uses for those in this exhibit.
										</p>
										<p>
										  	Adding a whole bunch of facets (and doing some standard CSS discussed below to control how they get laid out) gives us <a href="egypt5.html" target="result">this exhibit</a>; almost done!
										</p>

										<div class="example">
											<div class="exhibit">
											<div data-ex-role="facet" data-ex-expression=".location" data-ex-show-missing="false" data-ex-height="150px"></div>
											<p class="topics">Text:</p>
											<div data-ex-role="facet" data-ex-facet-class="TextSearch"></div>
											<p class="topics">Topics:</p>
											<div data-ex-role="facet" data-ex-expression=".keywords" data-ex-facet-class="Cloud" data-ex-show-missing="false"></div>
										  </div>
										</div>
									</div>

									<h3>2.11: Chaining Properties; Map View</h3>

									<div  class="narrative">
										We can similarly add a map as we did the timeline.   Like the timeline, maps need their own extension script added to the head:
										<p>
											<code>
<!-- HTML generated using hilite.me --><div style="background: #272822; overflow:auto;width:auto;padding: 10px; border-radius: 4px; color: #ccc;"><pre style="margin: 0; line-height: 125%"><span style="color: #f92672">&lt;script </span><span style="color: #a6e22e">src=</span><span style="color: #e6db74">&quot;http://trunk.simile-widgets.org/exhibit/api/extensions/map/map-extension.js&quot;</span><span style="color: #f92672">&gt;&lt;/script&gt;</span></pre></div>
											</code>
										</p>

										For maps we need (at least) Latitude/Longitude data for each item we want to plot, and that isn't available in our data set.  The simplest approach is to add a new column to the spreadsheet and add a latitude and longitude for each item.
										But for Andy's tweets we've taken a different approach.  These tweets happened at four locations named in our data: tahrir, talaat harb, museum, and Omar Makhram.  We are going to associate latitude/longitude with those locations, then connect them back to the specific tweets.  The latitude/longitude data is in another document, either a <a href="http://people.csail.mit.edu/karger/Exhibit/CAR/HandsOn/locations.txt">tsv file</a> or a <a href="https://docs.google.com/spreadsheet/pub?key=0AhAtARHyRN5adGZKTWstczJvNjEyU1JEUGdsd1UwZ0E&output=html">another google spreadsheet</a>.  It uses the locations as labels and gives each of them a "latlng" property, as well as a type.  We can include this data in our Exhibit:
										<p>
											<code>
<!-- HTML generated using hilite.me --><div style="background: #272822; overflow:auto;width:auto;padding: 10px; border-radius: 4px; color: #ccc;"><pre style="margin: 0; line-height: 125%"><span style="color: #f92672">&lt;link</span> <span style="color: #a6e22e">href=</span><span style="color: #e6db74">&quot;locations.txt&quot;</span> <span style="color: #a6e22e">rel=</span><span style="color: #e6db74">&quot;exhibit/data&quot;</span> <span style="color: #a6e22e">type=</span><span style="color: #e6db74">&quot;text/tsv&quot;</span><span style="color: #f92672">/&gt;</span></pre></div>
											</code>
										</p>
									</div>

									<iframe src="https://docs.google.com/spreadsheet/pub?key=0AhAtARHyRN5adGZKTWstczJvNjEyU1JEUGdsd1UwZ0E&output=html" width="100%" height="400px" style="overflow:auto"></iframe>

									<div class="narrative">
										Now that we've included the location data, here's the map tag:
									  	<p>
											<code>
<!-- HTML generated using hilite.me --><div style="background: #272822; overflow:auto;width:auto;padding: 10px; border-radius: 4px; color: #ccc;"><pre style="margin: 0; line-height: 125%"><span style="color: #f92672">&lt;div</span> 
  <span style="color: #a6e22e">data-ex-role=</span><span style="color: #e6db74">&quot;view&quot;</span> 
  <span style="color: #a6e22e">data-ex-view-class=</span><span style="color: #e6db74">&quot;Map&quot;</span> 
  <span style="color: #a6e22e">data-ex-latlng=</span><span style="color: #e6db74">&quot;.location.latlng&quot;</span> 
  <span style="color: #a6e22e">data-ex-zoom=</span><span style="color: #e6db74">&quot;16&quot;</span> 
  <span style="color: #a6e22e">data-ex-center=</span><span style="color: #e6db74">&quot;30.044939,31.23680&quot;</span> 
  <span style="color: #a6e22e">data-ex-top-band-pixels-per-unit=</span><span style="color: #e6db74">&quot;25px&quot;</span><span style="color: #f92672">&gt;</span>
<span style="color: #f92672">&lt;/div&gt;</span></pre></div>
											</code>
									  	<p>
											The most important option here specifies which latitude and longitude define the placement of items on the map.   This option contains something new: a <b>chain</b> of properties ".location.latlng".  The way to read this is as follows: for the item being displayed, look up its location.  That will give you the label of another item (one of the four locations).  Look up the latlng property of that item.  Exhibit lets you chain together arbitrary sequences of properties.  Breaking up your data this way is useful because now if you decide to update the latlng of a location you only need to do it in one place, instead of changing the value for every single item at that location.
										</p>
									  	<p>
											There are also, as with the timeline, options to set the initial center and zoom level of them map, to specify properties that determine the color and size of icons on the map, or even to associate an image or icon with each item that will show on the map---there's no useful icon for this exhibit, but you can see an example in this exhibit of <a href="http://simile-widgets.org/exhibit/examples/presidents/presidents.html">U.S. Presidents</a>
										</p>
									 	<p>
											Once we've included the 4 "location" objects, they by default become part of the data collection and get displayed in various lists.  We don't want that.  We use the <b>collection</b> tag to tell Exhibit which items we actually want to show in our views:
										</p>
									  	<p>
											<code>
<!-- HTML generated using hilite.me --><div style="background: #272822; overflow:auto;width:auto;padding: 10px; border-radius: 4px; color: #ccc;"><pre style="margin: 0; line-height: 125%"><span style="color: #f92672">&lt;div</span> 
  <span style="color: #a6e22e">data-ex-role=</span><span style="color: #e6db74">&quot;collection&quot;</span> 
  <span style="color: #a6e22e">data-ex-item-types=</span><span style="color: #e6db74">&quot;Item&quot;</span><span style="color: #f92672">&gt;</span>
<span style="color: #f92672">&lt;/div&gt;</span></pre></div>											
											</code>
										</p>
										<p>
										  	Now only the items of (default) type "Item" (namely the tweets) are plotted; the tweets of type "location" are not.
										</p>
									</div>

									<div class="example">
									  	<div class="exhibit">
											<div data-ex-role="view" data-ex-view-class="Map" data-ex-latlng=".location.latlng" data-ex-zoom="16" data-ex-center="30.044939,31.23680" >
										  		<div data-ex-role="lens">
													<a class="hoverOver" data-ex-href-content=".url"><div data-ex-content=".label"></div></a>
													<b>Topics:</b> <span data-ex-content=".keywords"></span>
													<br/><br/>
												</div>
											</div>
									  	</div>
									</div>

									<h3>2.12: Wrap Up: Css</h3>

									<div class="narrative">
									  	We've now incorporated all the exhibit tags necessary for our final visualization.  It remains to nicely style the result using CSS.  This is just a plain html page, so you can style it the usual way.  Exhibit assigns specific classes to the various elements it creates, and you can assign styles to those classes in order to style the exhibit elements.  The easiest way to identify the styles is using <a href="http://www.getfirebug.com">firebug</a> or some other DOM inspection tool: render the page, then use "inspect element" to identify the class that Exhibit has assigned to the rendered element.  As an example, the (default) list facets get a class of "exhibit-facet", so we can style them to all float on the same row using the following CSS:
									  	<br/><br/>
									  	<code>
<!-- HTML generated using hilite.me --><div style="background: #272822; overflow:auto;width:auto;padding: 10px; border-radius: 4px; color: #ccc;"><pre style="margin: 0; line-height: 125%"><span style="color: #f92672">&lt;style&gt;</span>
  <span style="color: #f92672">div</span><span style="color: #a6e22e">.exhibit-facet</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #66d9ef">float</span><span style="color: #f92672">:</span> <span style="color: #66d9ef">left</span><span style="color: #f8f8f2">;</span>
    <span style="color: #66d9ef">font-size</span><span style="color: #f92672">:</span> <span style="color: #ae81ff">15px</span><span style="color: #f8f8f2">;</span>
    <span style="color: #66d9ef">padding</span><span style="color: #f92672">:</span> <span style="color: #ae81ff">5px</span><span style="color: #f8f8f2">;</span>
    <span style="color: #66d9ef">position</span><span style="color: #f92672">:</span> <span style="color: #66d9ef">relative</span><span style="color: #f8f8f2">;</span>
    <span style="color: #66d9ef">width</span><span style="color: #f92672">:</span> <span style="color: #ae81ff">170px</span><span style="color: #f8f8f2">;</span>
  <span style="color: #f8f8f2">}</span>
<span style="color: #f92672">&lt;/style&gt;</span></pre></div></code><br/>
									<p>With this done (and more CSS) we produce our <a href="http://people.csail.mit.edu/karger/Exhibit/CAR/HandsOn/egypt.html" target="result">final exhibit</a>.</p><br/>
								</div>

								<div class="example">
									<iframe width="100%" height="600px" src="http://people.csail.mit.edu/karger/Exhibit/CAR/HandsOn/egypt.html"></iframe>
								</div>

								<h3>2.13: Using Google Spreadsheets</h3>

								<div  class="narrative">

									Exhibit can read its data directly out of a Google spreadsheet.  Google spreadsheets are nice for shared editing and dynamic updating, but they do tend to load more slowly than your own static data file.  
									<p>
										If you want to use a Google Spreadsheet like this, you need to <b>publish</b> it so Exhibit can access (but not edit) the data.  To do so, click on the "File" menu and select "Publish to the Web".  This will open a dialog where you should click "Publish".
									</p>
									<p>
										As a final step, you need to get a url that you can put in the exhibit link tag to tell it where to get the published data.  The address you're using to look at your spreadsheet won't work because it doesn't provide the data in the right format.  Google has made it strangely difficult to generate the link you need, so we've created <a href="http://projects.csail.mit.edu/exhibit/googleJSON/">this little form</a> to generate it for you.  Go to that page and paste in the link to the sheet you're currently looking at.  The tool will give you the url you need to use in the link tag.
									</p>
									<p>
										For our example, for our Egypt Exhibit, you can put the following link to the tweets spreadsheet in the head of the document instead of the previous json or tsv link:
									  	<p>
											<code>
<!-- HTML generated using hilite.me --><div style="background: #272822; overflow:auto;width:auto;padding: 10px; border-radius: 4px; color: #ccc;"><pre style="margin: 0; line-height: 125%"><span style="color: #f92672">&lt;link</span> 
  <span style="color: #f92672">rel=</span><span style="color: #e6db74">&quot;exhibit/data&quot;</span> <span style="color: #f92672">data-ex-converter=</span><span style="color: #e6db74">&quot;google-spreadsheets&quot;</span> 
  <span style="color: #f92672">type=</span><span style="color: #e6db74">&quot;application/jsonp&quot;</span>
  <span style="color: #f92672">href=</span><span style="color: #e6db74">&quot;https://spreadsheets.google.com/feeds/list/0AhAtARHyRN5adFBTczRpMktmS3BPU0lpRVBWenhCV3c/od6/public/basic?hl=en_US&amp;alt=json-in-script&quot;</span>
<span style="color: #f92672">/&gt;</span></pre></div>
											</code>
										</p>
										<p>
										Similarly, you can use the following link to pull the location data from its Google Spreadsheet:
										</p>
									  	<p>
											<code>
<!-- HTML generated using hilite.me --><div style="background: #272822; overflow:auto;width:auto;padding: 10px; border-radius: 4px; color: #ccc;"><pre style="margin: 0; line-height: 125%"><span style="color: #f92672">&lt;link</span> 
  <span style="color: #f92672">href=</span><span style="color: #e6db74">&quot;https://spreadsheets.google.com/feeds/list/0AhAtARHyRN5adGZKTWstczJvNjEyU1JEUGdsd1UwZ0E/od6/public/basic?alt=json-in-script&quot;</span>    
  <span style="color: #f92672">rel=</span><span style="color: #e6db74">&quot;exhibit/data&quot;</span> 
  <span style="color: #f92672">data-ex-converter=</span><span style="color: #e6db74">&quot;google-spreadsheets&quot;</span>   
  <span style="color: #f92672">type=</span><span style="color: #e6db74">&quot;application/jsonp&quot;</span>
<span style="color: #f92672">/&gt;</span></pre></div>
											</code>
									 	<p>
											Probably the biggest stumbling block for Google Spreadsheets (or Excel) is dates.  There are hundreds of ways to represent dates.  Exhibit understands the "official standard" UTC representation of year-month-day followed by hours:minutes:seconds, for example 1997-09-26 13:23:18.  So do spreadsheets, but they try to "help" you by translating your dates into <b>their</b> standard format, e.g. 9/26/1997.  Even if you format the date properly, they'll often change it back without telling you.  And why you try to serve it as data for exhibit, they'll serve the wrong format.  The best solution we've found is to tell the spreadsheet that your dates are actually <b>text strings</b>.  This may involve judicious copying of your data, pasting it as a string, and invoking some concatenation functions.  
										</p>
									</div>

									<h3>2.14: Next Steps</h3>

									<div>
										As you build your own exhibits, you'll probably want to look at a bunch of <b>examples</b>.  Remember, since these are just html files, you can download them and they'll work; then you can start to tweak them.  The <a href="http://simile-widgets.org/exhibit">Exhibit web site</a> has a bunch of examples we've built.  We've also set up an <a href="http://edwardbenson.com/viz/exhibits.html">exhibit of exhibits</a> that other people have made, to give you an idea of what can be done with the tool.  As you build your own, you'll probably want to check the <a href="http://simile-widgets.org/wiki/Reference_Documentation_for_Exhibit">Exhibit reference documentation</a> which lists all the different exhibit tags and the options you can set on them.  

										<p>
											If you don't like hand-editing html, we have projects under way to make authoring easier. Our <a href="http://projects.csail.mit.edu/datapress">Datapress</a> project provides a wordpress extension that lets you WYSIWYG edit your exhibit into a blog post, and <a href="http://projects.csail.mit.edu/exhibit/Dido">Dido</a> is a (still experimental) standalong WYSIWYG editor for exhibits.
										</p>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div></div>

		<div class="container">
			<div class="row">
				<div class="col-xs-12">
					<footer>
						Copyright © <a href="http://web.mit.edu/">Massachusetts Institute of Technology</a> and Contributors 2006-2013 ~ Some rights reserved
					</footer>
				</div>
			</div>
		</div>

		<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
		<script src="https://raw.githubusercontent.com/averynortonsmith/HTMLViews/master/HTMLViews.js"></script>

		<script src="inc/js/index.js" ></script>
	</body>
</html>
